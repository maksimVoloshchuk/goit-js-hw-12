{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\n\nconst API_KEY = \"53372311-1598a9acbbcd6e2742c5f6eb6\";\n\nexport async function getImagesByQuery(query, page) {\n    const options = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: 15\n    })\n    const { data } = await axios(\"\", { params: options })\n    return data\n}\n\n\n\n\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', { /* options */ });\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\")\n\n\nfunction createGallery(images) {\n    const markup = images.map(img => `\n     <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n    <img class=\"gallery-img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\">\n  </a>\n  <ul class=\"info\">\n    <li class=\"info-item\">\n      <b>Likes</b>${img.likes}\n    </li>\n    <li class=\"info-item\">\n      <b>Views</b>${img.views}\n    </li><li class=\"info-item\">\n      <b>Comments</b>${img.comments}\n    </li><li class=\"info-item\">\n      <b>Downloads</b>${img.downloads}\n    </li>\n  </ul>\n</li>   \n        `).join(\"\");\n\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nfunction clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nfunction showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nfunction hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\n\nfunction showLoadMoreButton(){\n  loadMoreBtn.classList.remove(\"hidden\");\n\n}\n\nfunction hideLoadMoreButton(){\n  loadMoreBtn.classList.add(\"hidden\");\n}\nexport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton,loadMoreBtn,gallery };\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, hideLoadMoreButton, showLoadMoreButton, loadMoreBtn, gallery } from \"./js/render-functions\"\n\n\nconst form = document.querySelector(\".form\");\nlet currentPage = 1;\nlet userQuery = \"\";\nlet totalPages = 0;\n\nform.addEventListener(\"submit\", searchImages);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\nasync function searchImages(event) {\n    event.preventDefault();\n    const { searchText } = event.target.elements;\n    userQuery = searchText.value.trim();\n    if (userQuery === \"\") {\n        return iziToast.error({\n            position: \"topRight\",\n            message: \"Please fill in the search field.\"\n        })\n    }\n    showLoader();\n    clearGallery();\n    hideLoadMoreButton();\n    currentPage = 1;\n    try {\n        const data = await getImagesByQuery(userQuery, currentPage)\n        if (data.hits.length === 0) {\n            return iziToast.error({\n                position: \"topRight\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\"\n            })\n        }\n        createGallery(data.hits);\n\n        if (data.totalHits > 15) {\n            showLoadMoreButton();\n            totalPages = Math.ceil(data.totalHits / 15)\n        } else {\n            iziToast.info({\n                position: \"topRight\",\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n\n        form.reset();\n    } catch (error) {\n        iziToast.error({\n            position: \"topRight\",\n            message: error.message\n        })\n    } finally {\n        hideLoader();\n    }\n\n}\n\nasync function onLoadMore() {\n    currentPage += 1;\n    hideLoadMoreButton();\n    showLoader();\n    try {\n        const data = await getImagesByQuery(userQuery, currentPage);\n        createGallery(data.hits);\n        const { height } = gallery.firstElementChild.getBoundingClientRect()\n        window.scrollBy({\n            top: height * 2,\n            behavior: \"smooth\",\n        });\n        if (totalPages === currentPage) {\n            return iziToast.info({\n                position: \"topRight\",\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n        showLoadMoreButton();\n\n    } catch (error) {\n        iziToast.error({\n            position: \"topRight\",\n            message: error.message\n        })\n    } finally {\n        hideLoader();\n    }\n}\n\n\n\n\n\n"],"names":["axios","API_KEY","getImagesByQuery","query","page","options","data","lightbox","SimpleLightbox","gallery","loader","loadMoreBtn","createGallery","images","markup","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","currentPage","userQuery","totalPages","searchImages","onLoadMore","event","searchText","iziToast","error","height"],"mappings":"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"}
